<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <title>DxChart</title>
        <link rel="shortcut icon" href="/assets/images/layout/DxChartIco.ico">
        <link rel="stylesheet" href="/assets/css/style.min.css" />
        <script src="/assets/js/common.js" type="module"></script>
    </head>
    <body>
        <div id="body-wrap">
            <!-- common.js에서 헤더 호출 -->
            <header></header>

            <main>
                <!-- 
                    갤러리, 메뉴얼 구분 클래스
                    갤러리 = gallery
                    메뉴얼 = manual
                -->
                <div id="main-wrap" class="gallery">
                    <!-- 
                        common.js에서 메뉴 호출 
                        갤러리 : gallery-menu
                        메뉴얼-차트별 : chart-menu
                        메뉴얼-속성별 : properties-menu
                    -->
                    <nav id="navMenu" class="gallery-menu"></nav>

                    <!-- iframe으로 메뉴 호출 -->
                    <iframe
                        src="/pages/gallery/main/index.html"
                        id="page-view"
                    ></iframe>

                    <script>
                        document.getElementById("page-view").addEventListener("load", (e) => {
                            const target = e.target;
                            const iframeDoc =
                                target.contentDocument || target.contentWindow.document;
                            if (!iframeDoc) return;

                            const pagePath = iframeDoc.querySelector(".page-path");
                            if (!pagePath) return;

                            // URL에서 마지막 두 개의 경로 요소 가져오기
                            const lastTwoCleaned = target.contentWindow.location.href
                                .split("/")
                                .slice(-2)
                                .map((part) => part.split(".")[0]);

                            ["home", ...lastTwoCleaned].forEach((text) => {
                                const li = document.createElement("li");
                                li.textContent = text;
                                pagePath.appendChild(li);
                            });
                        });
                    </script>
                </div>
                <!-- // .main-wrap -->
            </main>
        </div>
        <!-- // #body-wrap -->
    </body>
</html>
